<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Generate a standardised raster — standardise_rast • sprawl</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/united/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
  <link href="../extra.css" rel="stylesheet">
  
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Google analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-84499524-3', 'auto');
  ga('send', 'pageview');

</script>

  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">sprawl</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li>
  <a href="../articles/sprawl.html">Getting Started</a>
</li>
<li>
  <a href="../articles/articles/examples.html">Examples of Use</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Contributing
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/articles/contributing.html">Contributing</a>
    </li>
    <li>
      <a href="../articles/articles/coding_style.html">Coding Style</a>
    </li>
    <li>
      <a href="../articles/articles/CONDUCT.html">Code of Conduct</a>
    </li>
  </ul>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="../articles/faq.html">
    <span class="fa fa-question-circle-o"></span>
     
    faq
  </a>
</li>
<li>
  <a href="../news/index.html">
    <span class="fa fa-newspaper-o"></span>
     
    news
  </a>
</li>
<li>
  <a href="../reference/index.html">
    <span class="fa fa-file-code-o"></span>
     
    code reference
  </a>
</li>
<li>
  <a href="https://github.com/lbusett/sprawl/">
    <span class="fa fa-github fa-lg"></span>
     
    github
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Generate a standardised raster</h1>
    </div>

    
    <p>This function can be used to process a raster in order to</p><ol>
<li><p>obtain standardised values (Z-scores) within polygons of a specified
vector file or R spatial object, and/or</p></li>
<li><p>replace values of the raster near to the borders of the polygons with
local or global averages, and/or</p></li>
<li><p>fill holes (NA values) with local or global averages.</p></li>
</ol>

    <p>Some aliases are set for specific functions (see details).</p>
    

    <pre class="usage"><span class='fu'>standardise_rast</span>(<span class='no'>in_rast</span>, <span class='kw'>out_file</span> <span class='kw'>=</span> <span class='fl'>NA</span>, <span class='kw'>in_vect</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>by_poly</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>min_area</span> <span class='kw'>=</span> <span class='fl'>0</span>, <span class='kw'>method</span> <span class='kw'>=</span> <span class='st'>"zscore"</span>, <span class='kw'>fill_method</span> <span class='kw'>=</span> <span class='st'>"focal"</span>,
  <span class='kw'>fill_na</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>fill_borders</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>buffer</span> <span class='kw'>=</span> <span class='fl'>0</span>, <span class='kw'>parallel</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>format</span> <span class='kw'>=</span> <span class='fl'>NA</span>, <span class='kw'>compress</span> <span class='kw'>=</span> <span class='st'>"DEFLATE"</span>, <span class='kw'>overwrite</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)

<span class='fu'>standardize_rast</span>(<span class='no'>in_rast</span>, <span class='kw'>out_file</span> <span class='kw'>=</span> <span class='fl'>NA</span>, <span class='kw'>in_vect</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>by_poly</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>min_area</span> <span class='kw'>=</span> <span class='fl'>0</span>, <span class='kw'>method</span> <span class='kw'>=</span> <span class='st'>"zscore"</span>, <span class='kw'>fill_method</span> <span class='kw'>=</span> <span class='st'>"focal"</span>,
  <span class='kw'>fill_na</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>fill_borders</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>buffer</span> <span class='kw'>=</span> <span class='fl'>0</span>, <span class='kw'>parallel</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>format</span> <span class='kw'>=</span> <span class='fl'>NA</span>, <span class='kw'>compress</span> <span class='kw'>=</span> <span class='st'>"DEFLATE"</span>, <span class='kw'>overwrite</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)

<span class='fu'>zscore_rast</span>(<span class='no'>in_rast</span>, <span class='kw'>out_file</span> <span class='kw'>=</span> <span class='fl'>NA</span>, <span class='kw'>in_vect</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>by_poly</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>min_area</span> <span class='kw'>=</span> <span class='fl'>0</span>, <span class='kw'>fill_method</span> <span class='kw'>=</span> <span class='st'>"focal"</span>, <span class='kw'>fill_na</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>fill_borders</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>buffer</span> <span class='kw'>=</span> <span class='fl'>0</span>, <span class='kw'>parallel</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>format</span> <span class='kw'>=</span> <span class='fl'>NA</span>,
  <span class='kw'>compress</span> <span class='kw'>=</span> <span class='st'>"DEFLATE"</span>, <span class='kw'>overwrite</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)

<span class='fu'>fixborders_rast</span>(<span class='no'>in_rast</span>, <span class='kw'>out_file</span> <span class='kw'>=</span> <span class='fl'>NA</span>, <span class='kw'>in_vect</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>min_area</span> <span class='kw'>=</span> <span class='fl'>0</span>,
  <span class='kw'>fill_method</span> <span class='kw'>=</span> <span class='st'>"focal"</span>, <span class='kw'>fill_na</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>fill_borders</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>buffer</span> <span class='kw'>=</span> <span class='fl'>0</span>, <span class='kw'>parallel</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>format</span> <span class='kw'>=</span> <span class='fl'>NA</span>, <span class='kw'>compress</span> <span class='kw'>=</span> <span class='st'>"DEFLATE"</span>,
  <span class='kw'>overwrite</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)

<span class='fu'>fillgaps_rast</span>(<span class='no'>in_rast</span>, <span class='kw'>out_file</span> <span class='kw'>=</span> <span class='fl'>NA</span>, <span class='kw'>fill_method</span> <span class='kw'>=</span> <span class='st'>"focal"</span>, <span class='kw'>format</span> <span class='kw'>=</span> <span class='fl'>NA</span>,
  <span class='kw'>compress</span> <span class='kw'>=</span> <span class='st'>"DEFLATE"</span>, <span class='kw'>overwrite</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>in_rast</th>
      <td><p>The input raster or path.</p></td>
    </tr>
    <tr>
      <th>out_file</th>
      <td><p>The path of the output raster; if NULL (default),
a RasterLayer is returned by the function).</p></td>
    </tr>
    <tr>
      <th>in_vect</th>
      <td><p>The vector file or object containing the polygons used as
mask and as polygons within which computing the standardised values.</p></td>
    </tr>
    <tr>
      <th>by_poly</th>
      <td><p>Logical: if TRUE (default), input raster values are
standardised basing on the averages and standard deviations computed
within each polygon; if FALSE, they are computed on the whole
polygons.</p></td>
    </tr>
    <tr>
      <th>min_area</th>
      <td><p>Numeric: the minimum area (in squared metres) that polygons
must have to be considered and included in the final raster; default is
0 (all non empty polygons are considered). Notice that, if a value of
<code>buffer</code> &gt; 0 is set, the value of <code>min_area</code> applies also to buffered
polygons.</p></td>
    </tr>
    <tr>
      <th>method</th>
      <td><p>Character: the method used to standardise values.
Accepted values are:</p><ul>
<li><p><code>"zscore"</code> (default): compute the Z-score (real standardisation);</p></li>
<li><p><code>"center"</code>: center values over the average;</p></li>
<li><p><code>"input"</code>: do not standardise values (this method makes sense only
with <code>fill_method != "input"</code>, as a method to
interpolate values of border or holes).</p></li>
</ul></td>
    </tr>
    <tr>
      <th>fill_method</th>
      <td><p>Character: the method used to fill buffered areas
(if <code>buffer &lt; 0</code>) and holes (if <code>fill_na = TRUE</code>).
Accepted values are:</p><ul>
<li><p><code>"focal"</code> (default): a focal weight is applied to borders, so values
near the border of buffers are expanded (see details in the function
code);</p></li>
<li><p><code>"average"</code>: the averaged value within each polygon buffer
(corresponding to 0 with <code>method = "zscore"</code> or <code>"center"</code>)
is repeaded;</p></li>
<li><p><code>"source"</code>: standardised input values are maintained (but they do not
concur to compute average and standard deviation values used to
sdtandardise).</p></li>
</ul></td>
    </tr>
    <tr>
      <th>fill_na</th>
      <td><p>Logical: if TRUE (default), NA values within polygons are
filled using the method selected with argument <code>fill_method</code>;
if FALSE, they are letf to NA.</p></td>
    </tr>
    <tr>
      <th>fill_borders</th>
      <td><p>Logical: if TRUE (default), values between the border of
the polygons and the negative buffers around the polygons are filled using
the method set with argument <code>fill_method</code>; if FALSE, they are left to NA.
This argument makes sense only with <code>buffer &lt; 0</code>.</p></td>
    </tr>
    <tr>
      <th>buffer</th>
      <td><p>Numeric: the buffer (in metres) applied to polygons usd to
compute average and standard deviation (default is 0).
If <code>fill_borders = TRUE</code> (default) pixels which are outside this buffer are
still computed in the final raster (with the method chosen with
<code>fill_method</code> argument), but their input values do not concur to compute
average and standard deviation. Notice that, in order to exclude values
of borders, a negative value of <code>buffer</code> must be provided.</p></td>
    </tr>
    <tr>
      <th>parallel</th>
      <td><p>Logical or integer: if TRUE, the algorythm used to compute
output values is runned parallelised on single polygons and the number of
cores is automatically determined (otherwise, an integer value can be
provided in order to set this value manually); if FALSE (or 1), it is
runned on a single core. This value is not considered if <code>by_poly = TRUE</code>
(in this case, it is runned on a single core).</p></td>
    </tr>
    <tr>
      <th>format</th>
      <td><p>(optional) Format of the output file (in a
format recognised by GDAL). Default is to maintain each input format.</p></td>
    </tr>
    <tr>
      <th>compress</th>
      <td><p>(optional) In the case a GTiff format is
present, the compression indicated with this parameter is used.
Default is "DEFLATE".</p></td>
    </tr>
    <tr>
      <th>overwrite</th>
      <td><p>Logical value: should existing output files be
overwritten? (default: FALSE)</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>NULL if <code>out_file</code> is not NULL; the output RasterLayer otherwise.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Some aliases are set for specific functions:</p><ul>
<li><p><code>zscore_rast()</code> computes the Z-score on the input raster
(equivalent to <code>standardise_rast(method = "zscore")</code>);</p></li>
<li><p><code>fixborders_rast()</code> can be used to replace border values
(equivalent to <code>standardise_rast(method = "input", by_poly = TRUE)</code>);</p></li>
<li><p><code>fillgaps_rast()</code> is used to fill gaps (NA values) without using
polygon masks
(equivalent to <code>standardise_rast(by_poly = FALSE, min_area = 0, method = "input", fill_na = TRUE, fill_borders = FALSE, buffer = 0, parallel = FALSE)</code>).</p></li>
</ul>
    <p>By default, input raster values are standardised basing on the averages
and standard deviations computed within each polygon (it is possible to
specify a buffer value for computing them setting the <code>buffer</code> argument,
i.e. in order to exclude border values).
Oterwhise, setting <code>by_poly = FALSE</code> these metrics are computed on the whole
polygons (so raster values are simply linearly combined and masked on the
polygon surface).</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='co'># NOT RUN {</span>
<span class='co'># These examples cannot be runned globally;</span>
<span class='co'># a global example will be done in future.</span>

<span class='co'># Define input files and paths</span>
<span class='no'>projects_dir</span>  <span class='kw'>&lt;-</span> <span class='st'>"/mnt/projects"</span> <span class='co'># 10.0.1.230</span>
<span class='no'>nrworking_dir</span> <span class='kw'>&lt;-</span> <span class='st'>"/mnt/nr_working"</span> <span class='co'># 10.0.1.230</span>
<span class='no'>data_dir</span> <span class='kw'>&lt;-</span> <span class='fu'>file.path</span>(<span class='no'>nrworking_dir</span>,<span class='st'>"luigi/data/s2tsp/180117_test_zscore/MSAVI"</span>)
<span class='no'>raster_ex</span> <span class='kw'>&lt;-</span> <span class='fu'>raster</span>(<span class='fu'>file.path</span>(<span class='no'>data_dir</span>,<span class='st'>"S2B2A_20180104_022__MSAVI_10.tif"</span>))
<span class='fu'>source</span>(<span class='fu'>file.path</span>(<span class='no'>nrworking_dir</span>,<span class='st'>"luigi/code/satfarming/opencon_satfarming.R"</span>))
<span class='no'>appez</span> <span class='kw'>&lt;-</span> <span class='fu'>st_read_db</span>(
  <span class='no'>con_satfarming</span>,
  <span class='kw'>query</span> <span class='kw'>=</span> <span class='st'>"SELECT * FROM bf_jolanda.appez WHERE anno = 2017;"</span>
)

<span class='co'># Example 1: negative big buffer, focal method, fill NA</span>
<span class='no'>out_file</span> <span class='kw'>&lt;-</span> <span class='fu'>file.path</span>(<span class='no'>data_dir</span>,<span class='fu'>paste0</span>(<span class='no'>raster_ex</span>@<span class='kw'>data</span>@<span class='kw'>names</span>,<span class='st'>"_zscore1.tif"</span>))
<span class='no'>tmp</span> <span class='kw'>&lt;-</span> <span class='fu'>standardise_rast</span>(
  <span class='no'>raster_ex</span>, <span class='no'>out_file</span>, <span class='kw'>in_vect</span><span class='kw'>=</span><span class='no'>appez</span>[<span class='fl'>58</span>:<span class='fl'>60</span>,],
  <span class='kw'>by_poly</span><span class='kw'>=</span><span class='fl'>TRUE</span>, <span class='kw'>buffer</span> <span class='kw'>=</span> -<span class='fl'>30</span>, <span class='kw'>min_area</span><span class='kw'>=</span><span class='fl'>1E4</span>,
  <span class='kw'>parallel</span><span class='kw'>=</span><span class='fl'>TRUE</span>, <span class='kw'>overwrite</span><span class='kw'>=</span><span class='fl'>TRUE</span>,
  <span class='kw'>method</span> <span class='kw'>=</span> <span class='st'>"zscore"</span>, <span class='kw'>fill_method</span> <span class='kw'>=</span> <span class='st'>"focal"</span>, <span class='kw'>fill_na</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>
)

<span class='co'># Example 1.1: negative big buffer, focal method, do not fill NA</span>
<span class='no'>out_file</span> <span class='kw'>&lt;-</span> <span class='fu'>file.path</span>(<span class='no'>data_dir</span>,<span class='fu'>paste0</span>(<span class='no'>raster_ex</span>@<span class='kw'>data</span>@<span class='kw'>names</span>,<span class='st'>"_zscore1_1.tif"</span>))
<span class='no'>tmp</span> <span class='kw'>&lt;-</span> <span class='fu'>standardise_rast</span>(
  <span class='no'>raster_ex</span>, <span class='no'>out_file</span>, <span class='kw'>in_vect</span><span class='kw'>=</span><span class='no'>appez</span>[<span class='fl'>58</span>:<span class='fl'>60</span>,],
  <span class='kw'>by_poly</span><span class='kw'>=</span><span class='fl'>TRUE</span>, <span class='kw'>buffer</span> <span class='kw'>=</span> -<span class='fl'>30</span>, <span class='kw'>min_area</span><span class='kw'>=</span><span class='fl'>1E4</span>,
  <span class='kw'>parallel</span><span class='kw'>=</span><span class='fl'>TRUE</span>, <span class='kw'>overwrite</span><span class='kw'>=</span><span class='fl'>TRUE</span>,
  <span class='kw'>method</span> <span class='kw'>=</span> <span class='st'>"zscore"</span>, <span class='kw'>fill_method</span> <span class='kw'>=</span> <span class='st'>"focal"</span>, <span class='kw'>fill_na</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>
)

<span class='co'># Example 2: negative buffer, average method</span>
<span class='no'>out_file</span> <span class='kw'>&lt;-</span> <span class='fu'>file.path</span>(<span class='no'>data_dir</span>,<span class='fu'>paste0</span>(<span class='no'>raster_ex</span>@<span class='kw'>data</span>@<span class='kw'>names</span>,<span class='st'>"_zscore2.tif"</span>))
<span class='no'>tmp</span> <span class='kw'>&lt;-</span> <span class='fu'>standardise_rast</span>(
  <span class='no'>raster_ex</span>, <span class='no'>out_file</span>, <span class='kw'>in_vect</span><span class='kw'>=</span><span class='no'>appez</span>[<span class='fl'>58</span>:<span class='fl'>60</span>,],
  <span class='kw'>by_poly</span><span class='kw'>=</span><span class='fl'>TRUE</span>, <span class='kw'>buffer</span> <span class='kw'>=</span> -<span class='fl'>10</span>, <span class='kw'>min_area</span><span class='kw'>=</span><span class='fl'>1E4</span>, <span class='kw'>parallel</span><span class='kw'>=</span><span class='fl'>TRUE</span>, <span class='kw'>overwrite</span><span class='kw'>=</span><span class='fl'>TRUE</span>,
  <span class='kw'>method</span> <span class='kw'>=</span> <span class='st'>"zscore"</span>, <span class='kw'>fill_method</span> <span class='kw'>=</span> <span class='st'>"average"</span>
)

<span class='co'># Example 2.1: negative buffer, average method, fill_na=FALSE</span>
<span class='no'>out_file</span> <span class='kw'>&lt;-</span> <span class='fu'>file.path</span>(<span class='no'>data_dir</span>,<span class='fu'>paste0</span>(<span class='no'>raster_ex</span>@<span class='kw'>data</span>@<span class='kw'>names</span>,<span class='st'>"_zscore2_1.tif"</span>))
<span class='no'>tmp</span> <span class='kw'>&lt;-</span> <span class='fu'>standardise_rast</span>(
  <span class='no'>raster_ex</span>, <span class='no'>out_file</span>, <span class='kw'>in_vect</span><span class='kw'>=</span><span class='no'>appez</span>[<span class='fl'>58</span>:<span class='fl'>60</span>,],
  <span class='kw'>by_poly</span><span class='kw'>=</span><span class='fl'>TRUE</span>, <span class='kw'>buffer</span> <span class='kw'>=</span> -<span class='fl'>10</span>, <span class='kw'>min_area</span><span class='kw'>=</span><span class='fl'>1E4</span>, <span class='kw'>parallel</span><span class='kw'>=</span><span class='fl'>TRUE</span>, <span class='kw'>overwrite</span><span class='kw'>=</span><span class='fl'>TRUE</span>,
  <span class='kw'>method</span> <span class='kw'>=</span> <span class='st'>"zscore"</span>, <span class='kw'>fill_method</span> <span class='kw'>=</span> <span class='st'>"average"</span>, <span class='kw'>fill_na</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>
)

<span class='co'># Example 2.2: negative buffer, average method, do not fill borders</span>
<span class='no'>out_file</span> <span class='kw'>&lt;-</span> <span class='fu'>file.path</span>(<span class='no'>data_dir</span>,<span class='fu'>paste0</span>(<span class='no'>raster_ex</span>@<span class='kw'>data</span>@<span class='kw'>names</span>,<span class='st'>"_zscore2_2.tif"</span>))
<span class='no'>tmp</span> <span class='kw'>&lt;-</span> <span class='fu'>standardise_rast</span>(
  <span class='no'>raster_ex</span>, <span class='no'>out_file</span>, <span class='kw'>in_vect</span><span class='kw'>=</span><span class='no'>appez</span>[<span class='fl'>58</span>:<span class='fl'>60</span>,],
  <span class='kw'>by_poly</span><span class='kw'>=</span><span class='fl'>TRUE</span>, <span class='kw'>buffer</span> <span class='kw'>=</span> -<span class='fl'>20</span>, <span class='kw'>min_area</span><span class='kw'>=</span><span class='fl'>1E4</span>, <span class='kw'>parallel</span><span class='kw'>=</span><span class='fl'>TRUE</span>, <span class='kw'>overwrite</span><span class='kw'>=</span><span class='fl'>TRUE</span>,
  <span class='kw'>method</span> <span class='kw'>=</span> <span class='st'>"zscore"</span>, <span class='kw'>fill_method</span> <span class='kw'>=</span> <span class='st'>"average"</span>, <span class='kw'>fill_borders</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>
)

<span class='co'># Example 2.3: negative buffer, do not fill neither borders nor holes</span>
<span class='no'>out_file</span> <span class='kw'>&lt;-</span> <span class='fu'>file.path</span>(<span class='no'>data_dir</span>,<span class='fu'>paste0</span>(<span class='no'>raster_ex</span>@<span class='kw'>data</span>@<span class='kw'>names</span>,<span class='st'>"_zscore2_3.tif"</span>))
<span class='no'>tmp</span> <span class='kw'>&lt;-</span> <span class='fu'>standardise_rast</span>(
  <span class='no'>raster_ex</span>, <span class='no'>out_file</span>, <span class='kw'>in_vect</span><span class='kw'>=</span><span class='no'>appez</span>[<span class='fl'>58</span>:<span class='fl'>60</span>,],
  <span class='kw'>by_poly</span><span class='kw'>=</span><span class='fl'>TRUE</span>, <span class='kw'>buffer</span> <span class='kw'>=</span> -<span class='fl'>20</span>, <span class='kw'>min_area</span><span class='kw'>=</span><span class='fl'>1E4</span>, <span class='kw'>parallel</span><span class='kw'>=</span><span class='fl'>TRUE</span>, <span class='kw'>overwrite</span><span class='kw'>=</span><span class='fl'>TRUE</span>,
  <span class='kw'>method</span> <span class='kw'>=</span> <span class='st'>"zscore"</span>, <span class='kw'>fill_method</span> <span class='kw'>=</span> <span class='st'>"indifferent"</span>, <span class='kw'>fill_borders</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>fill_na</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>
)

<span class='co'># Example 3: no buffer, only fill holes</span>
<span class='no'>out_file</span> <span class='kw'>&lt;-</span> <span class='fu'>file.path</span>(<span class='no'>data_dir</span>,<span class='fu'>paste0</span>(<span class='no'>raster_ex</span>@<span class='kw'>data</span>@<span class='kw'>names</span>,<span class='st'>"_zscore3.tif"</span>))
<span class='no'>tmp</span> <span class='kw'>&lt;-</span> <span class='fu'>standardise_rast</span>(
  <span class='no'>raster_ex</span>, <span class='no'>out_file</span>, <span class='kw'>in_vect</span><span class='kw'>=</span><span class='no'>appez</span>[<span class='fl'>58</span>:<span class='fl'>60</span>,],
  <span class='kw'>by_poly</span><span class='kw'>=</span><span class='fl'>TRUE</span>, <span class='kw'>buffer</span> <span class='kw'>=</span> <span class='fl'>0</span>, <span class='kw'>min_area</span><span class='kw'>=</span><span class='fl'>1E4</span>, <span class='kw'>parallel</span><span class='kw'>=</span><span class='fl'>TRUE</span>, <span class='kw'>overwrite</span><span class='kw'>=</span><span class='fl'>TRUE</span>,
  <span class='kw'>method</span> <span class='kw'>=</span> <span class='st'>"zscore"</span>, <span class='kw'>fill_method</span> <span class='kw'>=</span> <span class='st'>"focal"</span>
)

<span class='co'># Example 4: do not standardise nor buffer, only fill holes (average)</span>
<span class='no'>out_file</span> <span class='kw'>&lt;-</span> <span class='fu'>file.path</span>(<span class='no'>data_dir</span>,<span class='fu'>paste0</span>(<span class='no'>raster_ex</span>@<span class='kw'>data</span>@<span class='kw'>names</span>,<span class='st'>"_zscore4.tif"</span>))
<span class='no'>tmp</span> <span class='kw'>&lt;-</span> <span class='fu'>standardise_rast</span>(
  <span class='no'>raster_ex</span>, <span class='no'>out_file</span>, <span class='kw'>in_vect</span><span class='kw'>=</span><span class='no'>appez</span>[<span class='fl'>58</span>:<span class='fl'>60</span>,],
  <span class='kw'>by_poly</span><span class='kw'>=</span><span class='fl'>TRUE</span>, <span class='kw'>buffer</span> <span class='kw'>=</span> <span class='fl'>0</span>, <span class='kw'>min_area</span><span class='kw'>=</span><span class='fl'>1E4</span>, <span class='kw'>parallel</span><span class='kw'>=</span><span class='fl'>TRUE</span>, <span class='kw'>overwrite</span><span class='kw'>=</span><span class='fl'>TRUE</span>,
  <span class='kw'>method</span> <span class='kw'>=</span> <span class='st'>"input"</span>, <span class='kw'>fill_method</span> <span class='kw'>=</span> <span class='st'>"average"</span>
)

<span class='co'># Example 5: positive (exagerated) buffer</span>
<span class='no'>out_file</span> <span class='kw'>&lt;-</span> <span class='fu'>file.path</span>(<span class='no'>data_dir</span>,<span class='fu'>paste0</span>(<span class='no'>raster_ex</span>@<span class='kw'>data</span>@<span class='kw'>names</span>,<span class='st'>"_zscore5.tif"</span>))
<span class='no'>tmp</span> <span class='kw'>&lt;-</span> <span class='fu'>standardise_rast</span>(
  <span class='no'>raster_ex</span>, <span class='no'>out_file</span>, <span class='kw'>in_vect</span><span class='kw'>=</span><span class='no'>appez</span>[<span class='fl'>58</span>:<span class='fl'>60</span>,],
  <span class='kw'>by_poly</span><span class='kw'>=</span><span class='fl'>TRUE</span>, <span class='kw'>buffer</span> <span class='kw'>=</span> <span class='fl'>250</span>, <span class='kw'>min_area</span><span class='kw'>=</span><span class='fl'>1E4</span>, <span class='kw'>parallel</span><span class='kw'>=</span><span class='fl'>TRUE</span>, <span class='kw'>overwrite</span><span class='kw'>=</span><span class='fl'>TRUE</span>,
  <span class='kw'>method</span> <span class='kw'>=</span> <span class='st'>"zscore"</span>, <span class='kw'>fill_method</span> <span class='kw'>=</span> <span class='st'>"focal"</span>
)

<span class='co'># Example 6: remove borders and holes, globally</span>
<span class='no'>out_file</span> <span class='kw'>&lt;-</span> <span class='fu'>file.path</span>(<span class='no'>data_dir</span>,<span class='fu'>paste0</span>(<span class='no'>raster_ex</span>@<span class='kw'>data</span>@<span class='kw'>names</span>,<span class='st'>"_zscore6.tif"</span>))
<span class='no'>tmp</span> <span class='kw'>&lt;-</span> <span class='fu'>standardise_rast</span>(
  <span class='no'>raster_ex</span>, <span class='no'>out_file</span>, <span class='kw'>in_vect</span><span class='kw'>=</span><span class='no'>appez</span>[<span class='fl'>58</span>:<span class='fl'>60</span>,],
  <span class='kw'>by_poly</span><span class='kw'>=</span><span class='fl'>FALSE</span>, <span class='kw'>buffer</span> <span class='kw'>=</span> -<span class='fl'>30</span>, <span class='kw'>min_area</span><span class='kw'>=</span><span class='fl'>1E4</span>, <span class='kw'>overwrite</span><span class='kw'>=</span><span class='fl'>TRUE</span>,
  <span class='kw'>method</span> <span class='kw'>=</span> <span class='st'>"zscore"</span>, <span class='kw'>fill_method</span> <span class='kw'>=</span> <span class='st'>"focal"</span>
)

<span class='co'># Example 7: fill holes without masking over polygons</span>
<span class='no'>out_file</span> <span class='kw'>&lt;-</span> <span class='fu'>file.path</span>(<span class='no'>data_dir</span>,<span class='fu'>paste0</span>(<span class='no'>raster_ex</span>@<span class='kw'>data</span>@<span class='kw'>names</span>,<span class='st'>"_zscore7.tif"</span>))
<span class='no'>tmp</span> <span class='kw'>&lt;-</span> <span class='fu'>standardise_rast</span>(
  <span class='no'>raster_ex</span>, <span class='no'>out_file</span>,
  <span class='kw'>buffer</span> <span class='kw'>=</span> <span class='st'>"indifferent"</span>, <span class='kw'>min_area</span><span class='kw'>=</span><span class='fl'>1E4</span>, <span class='kw'>overwrite</span><span class='kw'>=</span><span class='fl'>TRUE</span>,
  <span class='kw'>method</span> <span class='kw'>=</span> <span class='st'>"input"</span>, <span class='kw'>fill_method</span> <span class='kw'>=</span> <span class='st'>"focal"</span>
)
<span class='co'># }</span><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    
Luigi Ranghetti, phD (2018) <a href='mailto:ranghetti.l@irea.cnr.it'>ranghetti.l@irea.cnr.it</a>

Lorenzo Busetto, phD (2017) <a href='mailto:lbusett@gmail.com'>lbusett@gmail.com</a>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Lorenzo Busetto, Luigi Ranghetti.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
